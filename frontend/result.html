<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Результат</title>
    <link rel="stylesheet" href="result.css">
</head>

<body>
    <div class="filter-container">
        <div class="filter-header" onclick="toggleFilter(this)">
            <span>Фильтр критериев</span>
            <span class="arrow"></span>
        </div>
        <div class="filter-body">
            <div class="filter-item" data-index="0">
                <span class="bullet"></span>
                <span>Совпадение наименования закупки с документацией</span>
                <input type="checkbox" id="filter-0" checked />
            </div>
            <div class="filter-item" data-index="1">
                <span class="bullet"></span>
                <span>Обязательность указания обеспечения исполнения контракта в документации</span>
                <input type="checkbox" id="filter-1" checked />
            </div>
            <div class="filter-item" data-index="2">
                <span class="bullet"></span>
                <span>Совпадение требований о наличии сертификатов или лицензий данных закупки</span>
                <input type="checkbox" id="filter-2" checked />
            </div>
            <div class="filter-item" data-index="3">
                <span class="bullet"></span>
                <span>Согласованность графика по этапу поставки с документацией</span>
                <input type="checkbox" id="filter-3" checked />
            </div>
            <div class="filter-item" data-index="4">
                <span class="bullet"></span>
                <span>Соответствие цен в документации закупки</span>
                <input type="checkbox" id="filter-4" checked />
            </div>
            <div class="filter-item" data-index="5">
                <span class="bullet"></span>
                <span>Проверка соответствия ТЗ спецификации закупки</span>
                <input type="checkbox" id="filter-5" checked />
            </div>
        </div>
        <div class="link-container" id="link-output"></div>
        <script>
            // Массив из бекенда
            const backendStates = [0, 1, 0, 0, 1, 1]; // Пример массива
            let filterStates = [...backendStates]; // Копируем массив для управления
            const backendLink = "https://example.com"; // Пример ссылки

            function initializeFilters() {
                const checkboxes = document.querySelectorAll('input[type="checkbox"]');

                // Устанавливаем обработчики для чекбоксов
                checkboxes.forEach((checkbox, index) => {
                    checkbox.addEventListener('change', () => {
                        updateFilterStates(index, checkbox.checked);
                        updateLink();
                    });
                });

                // Изначально проверяем состояние и обновляем ссылку
                updateLink();
            }

            function updateFilterStates(index, isChecked) {
                // Если чекбокс включен, восстанавливаем значение из backendStates
                if (isChecked) {
                    filterStates[index] = backendStates[index];
                } else {
                    // Если чекбокс выключен, исключаем этот критерий (null)
                    filterStates[index] = null;
                }
            }

            function updateLink() {
                const filteredStates = filterStates.filter((state) => state !== null); // Исключаем отключенные критерии
                const showLink = filteredStates.includes(0); // Если хотя бы один 0, показываем ссылку

                const linkOutput = document.getElementById('link-output');
                if (showLink) {
                    linkOutput.innerHTML = `<a href="${backendLink}" target="_blank">Перейти по ссылке</a>`;
                } else {
                    linkOutput.innerHTML = ""; // Очищаем, если все единицы
                }
            }

            function toggleFilter(header) {
                const filterBody = header.nextElementSibling;
                filterBody.classList.toggle('open');
                header.classList.toggle('collapsed');
            }

            // Инициализация при загрузке страницы
            window.onload = () => {
                initializeFilters();
            };
        </script>
</body>

</html>
